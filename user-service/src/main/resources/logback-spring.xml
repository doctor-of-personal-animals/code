<?xml version="1.0" encoding="UTF-8"?>
<!-- 这个是根配置文件，一定要有的scan：是当配置文件被修改后会被重新加载 scanPeriod:设置监测配置文件是否有修改的时间间隔，如果没有给出时间单位，默认单位是毫秒。 
	当scan为true时，此属性生效。默认的时间间隔为1分钟。 debug： 当此属性设置为true时，将打印出logback内部日志信息，实时查看logback运行状态。 
	默认值为false。 -->
<configuration scan="true">
	<!-- 日志存放路径,下面的标签可以自己定义,name：相当于Map的key,value：就是map的value ${catalina.base}是tomcat的当前路径,/logs：就是tomcat下的日志路径 -->
	<!--<property name="logRoot" value="C:/logs/basicdata" /> -->
	<!-- <property name="logRoot" value="/var/applogs/basicdata" />-->
	<!-- appender：name相当于一个名称,class：确定要加载哪个类,encoder：一定要加 encoder,默认配置为PatternLayoutEncoder 
		patter：必填,ConsoleAppender：也明白是什么意思，就是输出在控制台上 -->
	<appender name="console" class="ch.qos.logback.core.ConsoleAppender">
		<encoder>
			<pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36}:%L- %msg%n
			</pattern>
		</encoder>
	</appender>
	<!-- 把日志存储 ,encoding：日志的编码,file：指定当前生成的日志文件名称 rollingPolicy：滚动策略,FileNamePattern：移动文件最后的名称，跟file标签结合使用， 
		比如file里面的内容是 1.txt 那么，FileNamePattern里面写的是2.txt，那么最后文件名就为2.txt 如果最后结尾是gz或者zip，那么，就会自动打成压缩包 -->
	<appender name="rollingFile"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>${logRoot}/user.log</file>
		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<fileNamePattern>${logRoot}/user-%d{yyyy-MM-dd}.log
			</fileNamePattern>
			<MaxHistory>
				7
			</MaxHistory>
		</rollingPolicy>
		<encoder>
			<pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36}:%L- %msg%n
			</pattern>
		</encoder>
	</appender>

	<appender name="sqlFile"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>${logRoot}/sql.log</file>
		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<fileNamePattern>${logRoot}/sql.%d{yyyy-MM-dd}.log</fileNamePattern>
		</rollingPolicy>
		<encoder>
			<pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36}:%L- %msg%n
			</pattern>
		</encoder>
	</appender>

	<!-- 项目默认日志等级 -->
	<logger name="com.user" level="info" />
	
	<!-- 定义接口日志文件 -->
	<logger name="com.user" level="debug">
		<appender-ref ref="rollingFile"/>  
	</logger>
	<logger name="org.apache.tomcat" level="info"><!-- 数据源会把执行慢或者错误的sql放置到这个日志文件中 -->  
		<appender-ref ref="sqlFile"/>
	</logger>
	
	<!-- 默认根节点是INFO级别的日志 -->
    <!-- root：logger的根节点，就这一个，默认名称就是root,level：日志级别,appender-ref：确定使用哪个appender-->
	<root level="info">
		<appender-ref ref="console" /> 
		<appender-ref ref="rollingFile" />
	</root>

</configuration>